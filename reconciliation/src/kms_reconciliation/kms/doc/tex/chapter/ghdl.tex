\chapter{Simulating VHDL Programs with GHDL}

This guide will help you simulate VHDL programs with the open-source simulator GHDL.

\section{Adding Path To System Variables}
Please follow this step-by-step tutorial:
  \begin{enumerate}
    \item Open the \textbf{Control Panel}.
    \item Select the option \textbf{System and Security}.
    \item Select the option \textbf{System}.
    \item Select \textbf{Advanced System Settings} on the menu on the left side of the window.
    \item This should have opened another window. Click on \textbf{Environment variables}.
    \item Check if there is a variable called \textbf{Path} in the \textbf{System Variables} (bottom list).
    \item \textbf{If it doesn't exist}, create a new variable by pressing \textbf{New} in \textbf{System Variables} (bottom list). Insert the name \textbf{Path} as the name of the variable and enter your absolute path to the folder \textbf{\textbackslash{}LinkPlanner\textbackslash{}ghdl\textbackslash{}bin}.\\ Example:
        \textbf{C:\textbackslash{}repos\textbackslash{}LinkPlanner\textbackslash{}ghdl\textbackslash{}bin}.\\
          Jump to step 10.
    \item \textbf{If it exists}, click on the variable \textbf{Path} and press \textbf{Edit}. This should open another window;
    \item Click on \textbf{New} to add another value to this variable. Enter your absolute path to the folder \textbf{\textbackslash{}LinkPlanner\textbackslash{}ghdl\textbackslash{}bin}.\\ Example:
        \textbf{C:\textbackslash{}repos\textbackslash{}LinkPlanner\textbackslash{}ghdl\textbackslash{}bin}.\\
    \item Press \textbf{Ok} and you're done.
  \end{enumerate}
\pagebreak
\section{Using GHDL To Simulate VHDL Programs}
This guide is meant to explain how to execute the testbench for module CPE BPS.\\
This simulation will take two .sgn files as input and produce two .sgn files.\\

\subsection{Simulation Input}
Make sure that files S19.sgn and S20.sgn exist in directory \textbf{\textbackslash{}LinkPlanner\textbackslash{}sdf\textbackslash{}dsp\_laser\_phase\_compensation\textbackslash{}signals}. The content of these files will be used as input of the CPE BPS module.

\subsection{Executing Testbench}
Execute the batch file \textbf{simulation.bat}, located in the directory \textbf{\textbackslash{}LinkPlanner\textbackslash{}sdf\textbackslash{}dsp\_laser\_phase\_compensation\textbackslash{}VHDL\textbackslash{}Simulator\textbackslash{}} of this repository.

\subsection{Simulation Output}
The simulation will produce two files: \textbf{sim\_out\_1.sgn} and \textbf{sim\_out\_2.sgn} which will contain the output of the CPE BPS module.
